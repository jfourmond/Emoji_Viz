<!DOCTYPE html>
<html>
 	<head>
		<meta charset='utf-8'>
		<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
		<link rel="stylesheet" href="https://code.getmdl.io/1.2.1/material.blue-light_blue.min.css" />
		<title>Liste des emojis</title>
		<script defer src="https://code.getmdl.io/1.2.1/material.min.js"></script>
		<script src="https://d3js.org/d3.v4.min.js"></script>
		<script src="https://d3js.org/queue.v1.min.js"></script>
		<style>
			table {
				margin: 40px;
				padding: 40px;
			}
			th, td {
				width: 10%;
			}
		</style>
	</head>
	<body>
		<h2>Liste des emojis</h2>
		<script>
			queue()
				.defer(d3.csv, "emoji.csv")
				.await(processData);

 			function processData(error, emojis) {
				var keys = d3.keys(emojis[0]);
				keys.splice(3, 13);

				showTable(keys, emojis);
			}

			function showTable(keys, emojis) {
				var table = d3.select("body").append("table")
					.attr("class", "mdl-data-table mdl-js-data-table mdl-shadow--2dp");
				var thead = table.append("thead");
				var tbody = table.append("tbody");

				thead.append("tr")
					.selectAll("th")
					.data(keys).enter()
					.append("th")
					.text(function(key) {
						return key;
					});

				var tr = tbody.selectAll("tr")
					.data(emojis).enter()
					.append("tr");

				var cells = tr.selectAll("td")
					.data(function(d) {
						return keys.map(function(key) {
							return {
								key : key,
								value : d[key]
							};
						});
					}).enter()
					.append("td")
					.text(function(d) { return d.value; });
			}
		</script>
	</body>
</html>
